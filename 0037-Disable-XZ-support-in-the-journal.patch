From ebe86ffe28c0c920cc01467103d467992e22ba7e Mon Sep 17 00:00:00 2001
From: Arjan van de Ven <arjan@linux.intel.com>
Date: Mon, 14 Jan 2019 09:46:32 -0800
Subject: [PATCH 37/43] Disable XZ support in the journal.

---
 src/coredump/coredump.c | 3 +++
 src/journal/compress.c  | 2 ++
 2 files changed, 5 insertions(+)

diff --git a/src/coredump/coredump.c b/src/coredump/coredump.c
index d4052f69db..57dbd176db 100644
--- a/src/coredump/coredump.c
+++ b/src/coredump/coredump.c
@@ -49,6 +49,9 @@
 #include "tmpfile-util.h"
 #include "user-util.h"
 
+#undef HAVE_XZ
+#define HAVE_XZ 0
+
 /* The maximum size up to which we process coredumps */
 #define PROCESS_SIZE_MAX ((uint64_t) (2LLU*1024LLU*1024LLU*1024LLU))
 
diff --git a/src/journal/compress.c b/src/journal/compress.c
index bfb75ae8c9..40a6b3518a 100644
--- a/src/journal/compress.c
+++ b/src/journal/compress.c
@@ -29,6 +29,8 @@
 #include "unaligned.h"
 #include "util.h"
 
+#undef HAVE_XZ
+#define HAVE_XZ 0
 #if HAVE_LZ4
 DEFINE_TRIVIAL_CLEANUP_FUNC(LZ4F_compressionContext_t, LZ4F_freeCompressionContext);
 DEFINE_TRIVIAL_CLEANUP_FUNC(LZ4F_decompressionContext_t, LZ4F_freeDecompressionContext);
-- 
2.23.0

